<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Colourscript · Studio Luzano</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Password-protected colourscript work by Antonio Luzano." />
  <meta name="robots" content="noindex, nofollow" />

  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=EB+Garamond:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../styles.css?v=colourscript-masonry" />

  <style>
    .hidden { display:none !important; }

    /* Give art a little more room */
    .page { max-width: 1320px; }

    .section-title{
      font-family:"Cormorant Garamond",serif;
      font-size:1.05rem; letter-spacing:.12em; text-transform:uppercase;
      text-align:center; color:#7a8270; margin:28px 0 16px;
    }
    .portfolio-section{ margin:34px 0 12px; }

    /* ---------- Layouts ---------- */

    /* A) MASONRY (great for mixed aspect ratios like Colour Script) */
    .masonry{
      column-count: 3;
      column-gap: 18px;
    }
    @media (max-width:1100px){ .masonry{ column-count: 2; } }
    @media (max-width:620px){  .masonry{ column-count: 1; } }
    .masonry img{
      width:100%;
      height:auto;
      display:block;
      margin:0 0 18px;
      break-inside: avoid;
      background:#f3f0e8;
      cursor:zoom-in; user-select:none; -webkit-user-drag:none;
    }

    /* B) UNIFORM GRID (clean rows for Keys/PAINTINGS ON LOCATION) */
    .gallery { display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:18px; }
    @media (max-width:1100px){ .gallery{ grid-template-columns:repeat(2,1fr);} }
    @media (max-width:620px){  .gallery{ grid-template-columns:1fr;} }

    .gallery.uniform img{
      width:100%;
      height:100%;
      display:block;
      object-fit: cover;     /* crop just in the thumbnail */
      background:#f3f0e8;
      cursor:zoom-in; user-select:none; -webkit-user-drag:none;
    }
    /* Aspect helpers for uniform thumbs */
    .ar-16x9 img { aspect-ratio: 16 / 9; }
    .ar-4x3  img { aspect-ratio: 4 / 3;  }

    /* ===== PREVIEW (visible before password) ===== */
    .preview-wrap { margin: 18px 0 6px; }
    .preview-title{
      font-family:"Cormorant Garamond",serif;
      font-size:.95rem;
      letter-spacing:.10em;
      text-transform:uppercase;
      text-align:center;
      color:#7a8270;
      margin: 18px 0 12px;
    }
    /* Larger preview: 2 columns desktop, 1 column mobile */
    .preview-masonry{ column-count:2; column-gap:18px; }
    @media (max-width:620px){ .preview-masonry{ column-count:1; } }

    .preview-masonry img{
      width:100%;
      height:auto;
      display:block;
      margin:0 0 18px;
      break-inside:avoid;
      background:#f3f0e8;
      border-radius:4px;
      filter:saturate(.96) contrast(.98);
      user-select:none; -webkit-user-drag:none;
      cursor:zoom-in;
    }

    /* Soft deterrent */
    #protected-content img { -webkit-user-drag:none; user-select:none; }

    /* ---------- Lightbox ---------- */
    .lightbox-overlay{
      position:fixed; inset:0; display:none; align-items:center; justify-content:center;
      background:rgba(0,0,0,.9); z-index:2000;
    }
    .lightbox-overlay.visible{ display:flex; }
    .lightbox-overlay img{
      max-width:92vw; max-height:92vh;
      box-shadow:0 20px 50px rgba(0,0,0,.6);
      cursor:zoom-out;
    }
    .lightbox-arrow{
      position:absolute; top:50%; transform:translateY(-50%);
      width:56px; height:56px; border-radius:999px; border:1px solid #F4F2EC;
      background:rgba(0,0,0,.45); color:#F4F2EC; font-size:2.2rem;
      display:flex; align-items:center; justify-content:center; cursor:pointer;
      user-select:none;
    }
    .lightbox-arrow:hover{ background:rgba(0,0,0,.75); }
    .lightbox-prev{ left:28px; } .lightbox-next{ right:28px; }
  </style>
</head>

<body>
  <div class="page">
    <!-- HEADER -->
    <header class="site-header">
      <a href="../index.html" class="avatar-wrapper">
        <img src="../images/avatar.png" alt="Portrait of Antonio Luzano" class="avatar">
      </a>
      <h1 class="site-title">
        <a href="../index.html"><img src="../images/logo-name.png" alt="Antonio Luzano" class="name-logo"></a>
      </h1>
  <p class="identity-line">
  <span class="role">illustrator</span>
  <span class="dot">·</span>
  <a href="mailto:antonioluzano@gmail.com">antonioluzano@gmail.com</a>
  <span class="dot">·</span>
  <a href="tel:+358414846365">+358&nbsp;41&nbsp;484&nbsp;6365</a>
</p>

      <nav class="section-nav">
<ul class="menu">
  <li class="menu-item has-dropdown">
    <a href="#">Illustration</a>
    <ul class="dropdown">
      <li><a href="/projects/run.html">RUN</a></li>
      <li><a href="/projects/jackies-drawing.html">Jackie’s Drawing</a></li>
      <li><a href="/projects/i-just-want-to-be-super.html">I Just Want to be Super!</a></li>
      <li><a href="/projects/everyday-walk.html">Everyday Walk</a></li>
      <li><a href="/projects/personal.html">Personal</a></li>
      <li><a href="/projects/pleinair.html">Plein Air</a></li>
    </ul>
  </li>

  <li class="menu-item has-dropdown">
    <a href="#">Animation</a>
    <ul class="dropdown">
      <li><a href="/projects/concept-art.html">Concept Art</a></li>
      <li><a href="/projects/colourscript.html">Colourscript</a></li>
    </ul>
  </li>

  <li class="menu-item"><a href="/projects/studio-luzano-koulu.html">Private lessons</a></li>
<li class="menu-item has-dropdown">
  <a href="#">Shop</a>
  <ul class="dropdown">
    <li>
      <a href="https://www.inprnt.com/profile/studioluzano/" target="_blank" rel="noopener">
        Prints
      </a>
    </li>
    <li>
      <a href="https://holvi.com/shop/studioluzano/" target="_blank" rel="noopener">
        Originals
      </a>
    </li>
  </ul>
</li>

  <li class="menu-item"><a href="https://studioluzano.kit.com/c8c2f79135" target="_blank" rel="noopener">Newsletter</a></li>
  <li class="menu-item"><a href="/projects/about.html">About</a></li>
</ul>
      </nav>
    </header>

    <!-- MAIN -->
    <main>
      <section class="text-section">
        <h2 class="page-title">Colourscript</h2>
        <p class="page-intro">
          A selection of colourscripts, colour keys and studies for production and personal use.
        </p>

        <!-- Password box -->
        <div id="password-box" class="password-box">
          <form id="password-form" class="password-form" autocomplete="off">
            <label for="portfolio-password">Enter password</label>
            <input type="password" id="portfolio-password" autocomplete="new-password" placeholder="Password" inputmode="text" />
            <button type="submit">Enter</button>
            <p id="password-error" class="password-error hidden" aria-live="polite">Incorrect password. Please try again.</p>
          </form>
        </div>

        <!-- PREVIEW (visible before password) -->
        <div id="preview-wrap" class="preview-wrap">
          <div class="preview-title">Preview</div>
          <div class="preview-masonry" id="preview-masonry">
            <!-- Pick 3 teaser images -->
            <img src="../images/color-04.jpg" alt="Colourscript preview 1">
            <img src="../images/Moomin_colorkey_306.jpg" alt="Colourscript preview 2">
            <img src="../images/pleinair-1.jpg" alt="Colourscript preview 3">
          </div>
        </div>

        <!-- Protected content -->
        <div id="protected-content" class="hidden" oncontextmenu="return false;">
          <hr class="soft-divider" />

          <!-- COLOUR SCRIPT (masonry) -->
          <section class="portfolio-section">
            <h2 class="section-title">Colour Script</h2>
            <div class="masonry">
              <img src="../images/color-04.jpg" alt="Colourscript panel" loading="lazy">
              <img src="../images/Moomin_colourscript_saraepisode.jpg" alt="Colourscript panel" loading="lazy">
              <img src="../images/color-09.jpg" alt="Colourscript panel" loading="lazy">
              <img src="../images/Moomin_colorscript_auntjane.jpg" alt="Colourscript panel" loading="lazy">
              <img src="../images/color-07.jpg" alt="Colourscript panel" loading="lazy">
              <img src="../images/color-02.jpg" alt="Colourscript panel" loading="lazy">
              <img src="../images/Firehunter_colorscript_tree.jpg" alt="Colourscript panel" loading="lazy">
              <img src="../images/Colourscript_brothers.jpg" alt="Colourscript panel" loading="lazy">
            </div>
          </section>

          <!-- COLOUR KEYS (uniform 16:9) -->
          <section class="portfolio-section">
            <h2 class="section-title">Colour Keys</h2>
            <div class="gallery uniform ar-16x9">
              <img src="../images/key-11.jpg" alt="Colour key" loading="lazy">
              <img src="../images/key-10.jpg" alt="Colour key" loading="lazy">
              <img src="../images/key-07.jpg" alt="Colour key" loading="lazy">
              <img src="../images/Moomin_colorkey_306.jpg" alt="Colour key" loading="lazy">
              <img src="../images/Moomin_colorkey_308.jpg" alt="Colour key" loading="lazy">
              <img src="../images/Moomin_colorkey_MPandMMonboat.jpg" alt="Colour key" loading="lazy">
              <img src="../images/Moomin_colorkey_autumnfillyjonk.jpg" alt="Colour key" loading="lazy">
              <img src="../images/color-03.jpg" alt="Colour key" loading="lazy">
              <img src="../images/color-05.jpg" alt="Colour key" loading="lazy">
              <img src="../images/Moomin_colorkey_snorkmaidenhorse.jpg" alt="Colour key" loading="lazy">
            </div>
          </section>

          <!-- PLEIN AIR PAINTING (uniform 4:3) -->
          <section class="portfolio-section">
            <h2 class="section-title">PAINTINGS ON LOCATION</h2>
            <div class="gallery uniform ar-4x3">
              <img src="../images/pleinair-1.jpg"  alt="Study" loading="lazy">
              <img src="../images/pleinair-2.jpg"  alt="Study" loading="lazy">
              <img src="../images/pleinair-3.jpg"  alt="Study" loading="lazy">
              <img src="../images/pleinair-4.jpg"  alt="Study" loading="lazy">
              <img src="../images/pleinair-5.jpg"  alt="Study" loading="lazy">
              <img src="../images/pleinair-6.jpg"  alt="Study" loading="lazy">
              <img src="../images/pleinair-7.jpg"  alt="Study" loading="lazy">
              <img src="../images/pleinair-8.jpg"  alt="Study" loading="lazy">
              <img src="../images/pleinair-9.jpg"  alt="Study" loading="lazy">
              <img src="../images/pleinair-10.jpg" alt="Study" loading="lazy">
              <img src="../images/pleinair-11.jpg" alt="Study" loading="lazy">
              <img src="../images/pleinair-12.jpg" alt="Study" loading="lazy">
            </div>
          </section>

          <hr class="soft-divider" />
          <p class="page-intro" style="text-align:center;">Please do not share or redistribute.</p>
        </div>
      </section>

      <!-- LIGHTBOX -->
      <div id="lightbox" class="lightbox-overlay" aria-hidden="true">
        <button class="lightbox-arrow lightbox-prev" aria-label="Previous">‹</button>
        <img src="" alt="">
        <button class="lightbox-arrow lightbox-next" aria-label="Next">›</button>
      </div>

      <!-- CONTACT -->
      <section class="text-section">
        <h2>Contact</h2>
        <p>For work collaborations:<br>
          <a href="mailto:antonioluzano@gmail.com">antonioluzano@gmail.com</a>
        </p>
      </section>
    </main>

    <footer class="site-footer">
      <p>© <span id="year"></span> Antonio Luzano. All rights reserved. Do not copy, save or redistribute without written permission.</p>
    </footer>
  </div>

  <script>
    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    /* ===== Password gate with SHA-256 (client-side) + cached auth =====
       Current password: "blueforest"
       sha256("blueforest") = e85a11225da830d3bf49fdb07f624f019ef138af9d21bbb2834c58dc59042255
    */
    const PASSWORD_HASH_HEX = "e85a11225da830d3bf49fdb07f624f019ef138af9d21bbb2834c58dc59042255";

    const AUTH_KEY = "sluz_auth_v1";
    const AUTH_MAX_AGE_MS = 7 * 24 * 60 * 60 * 1000;

    function isAuthorized() {
      try {
        const raw = localStorage.getItem(AUTH_KEY);
        if (!raw) return false;
        const data = JSON.parse(raw);
        if (!data || data.hash !== PASSWORD_HASH_HEX) return false;
        return (Date.now() - data.ts) < AUTH_MAX_AGE_MS;
      } catch (_) { return false; }
    }
    function grantAuth() {
      try {
        localStorage.setItem(AUTH_KEY, JSON.stringify({ hash: PASSWORD_HASH_HEX, ts: Date.now() }));
      } catch (_) {}
    }

    async function sha256Hex(str){
      const enc = new TextEncoder().encode(str);
      const buf = await crypto.subtle.digest("SHA-256", enc);
      return Array.from(new Uint8Array(buf)).map(b => b.toString(16).padStart(2,"0")).join("");
    }

    const form = document.getElementById('password-form');
    const input = document.getElementById('portfolio-password');
    const error = document.getElementById('password-error');
    const box = document.getElementById('password-box');
    const protectedContent = document.getElementById('protected-content');

    function unlock() {
      box.style.display = 'none';

      const preview = document.getElementById('preview-wrap');
      if (preview) preview.style.display = 'none';

      protectedContent.classList.remove('hidden');
      error.classList.add('hidden');

      wireProtectedLightboxClicks();
    }

    if (isAuthorized()) unlock();

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const value = (input.value || "").trim();
      const digest = await sha256Hex(value);

      if (digest === PASSWORD_HASH_HEX) {
        grantAuth();
        input.value = "";
        unlock();
        protectedContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
      } else {
        error.classList.remove('hidden');
      }
    });

    /* ===== Shared Lightbox (Preview + Protected) ===== */
    const lb    = document.getElementById('lightbox');
    const lbImg = lb.querySelector('img');
    const prev  = lb.querySelector('.lightbox-prev');
    const next  = lb.querySelector('.lightbox-next');

    let sources = [];
    let i = 0;

    function show(idx){
      if (!sources.length) return;
      i = (idx + sources.length) % sources.length;
      lbImg.src = sources[i];
    }

    function openGallery(srcList, startSrc){
      sources = srcList.slice();
      const start = sources.indexOf(startSrc);
      lb.classList.add('visible');
      lb.setAttribute('aria-hidden','false');
      show(start >= 0 ? start : 0);
    }

    function closeLB(){
      lb.classList.remove('visible');
      lb.setAttribute('aria-hidden','true');
      lbImg.src = '';
    }

    lb.addEventListener('click', closeLB);
    lbImg.addEventListener('click', e => e.stopPropagation());
    prev.addEventListener('click', e => { e.stopPropagation(); show(i - 1); });
    next.addEventListener('click', e => { e.stopPropagation(); show(i + 1); });

    document.addEventListener('keydown', e => {
      if (!lb.classList.contains('visible')) return;
      if (e.key === 'Escape') closeLB();
      if (e.key === 'ArrowLeft') show(i - 1);
      if (e.key === 'ArrowRight') show(i + 1);
    });

    // Wire PREVIEW clicks
    function wirePreviewLightboxClicks(){
      const previewImgs = Array.from(document.querySelectorAll('#preview-masonry img'));
      if (!previewImgs.length) return;
      const previewSources = previewImgs.map(img => img.src);

      previewImgs.forEach(img => {
        img.addEventListener('click', () => openGallery(previewSources, img.src));
      });
    }
    wirePreviewLightboxClicks();

    // Wire PROTECTED clicks (after unlock)
    function wireProtectedLightboxClicks(){
      const imgs = Array.from(document.querySelectorAll('#protected-content .gallery img, #protected-content .masonry img'));
      if (!imgs.length) return;
      const protectedSources = imgs.map(img => img.src);

      imgs.forEach(img => {
        img.addEventListener('click', () => openGallery(protectedSources, img.src));
      });
    }

    // If loaded with content already visible (dev preview)
    if (!protectedContent.classList.contains('hidden')) {
      wireProtectedLightboxClicks();
    }
  </script>
</body>
</html>
